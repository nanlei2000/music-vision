(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(30)},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),a=n(18),r=n.n(a),u=(n(28),n(7)),i=n(34),s=n(31),l=n(36),f=n(35),b=n(32),d=n(33),m=n(37),v=n(19),j=i.a(new Uint8Array);var p=n(20),g=n.n(p);function w(e){var t=e.data,n=document.createElement("div"),a=Object(c.useState)(!1),r=Object(u.a)(a,2),i=r[0],s=r[1],l=Object(c.useState)(void 0),f=Object(u.a)(l,2),b=f[0],d=f[1];return Object(c.useEffect)(function(){if(!i){console.log("once");var e=new g.a.Chart({container:n,forceFit:!0,height:400,padding:{left:0,right:0,bottom:0,top:0}});e.source(t),e.axis(!1),e.legend(!1),e.tooltip(!1),e.line().position("index*volume").color("#000"),e.render(),d(e),s(!0)}return b&&i&&b.changeData(t),function(){}}),o.a.createElement("div",{id:"chart",ref:function(e){n=e}})}n(29);var h=n(3),O="https://raw.githubusercontent.com/nanlei2000/music-src/master/Levitate.mp3",E={pause:function(){},resume:function(){},close:function(){},subject:j},y=function(e){return e.reduce(function(e,t,n){return e.concat({index:n+1,volume:t})},[])};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(O),i=Object(u.a)(r,2),j=i[0],p=i[1],g=Object(c.useState)(!1),S=Object(u.a)(g,2),k=S[0],C=S[1],x=Object(c.useState)(!1),A=Object(u.a)(x,2),B=(A[0],A[1],Object(c.useState)(!1)),z=Object(u.a)(B,2),D=z[0],q=z[1],F=Object(c.useState)(h.a.EMPTY),J=Object(u.a)(F,2),U=J[0],W=J[1],G=function(){return function(e){return fetch(e).then(function(e){return e.arrayBuffer()})}(j).then(function(e){return function(e){var t=e.src,n=e.volume,c=e.size,o=new(window.AudioContext||window.webkitAudioContext),a=o.createGain();a.gain.value=n,a.connect(o.destination);var r=o.createAnalyser();return r.fftSize=2*c,r.connect(a),o.decodeAudioData(t).then(function(e){var t=o.createBufferSource();t.buffer=e,t.loop=!0,t.connect(r),t.start(0);var n=new Uint8Array(r.frequencyBinCount),c=new s.a(n);return{pause:function(){o.suspend()},resume:function(){o.resume()},close:function(){o.close(),c.unsubscribe()},subject:l.a(0,f.a).pipe(Object(b.a)(function(){console.log(1),r.getByteFrequencyData(n)}),Object(d.a)(function(){return n}),Object(m.a)(c),Object(v.a)())}})}({src:e,size:128,volume:.6})}).then(function(e){E=e,I(e)})};return o.a.createElement("div",null,o.a.createElement("button",{style:{marginRight:"10px",backgroundColor:D?"orange":"unset"},onClick:function(){E.close(),q(!0),G().finally(function(){q(!1)})}},D?"loading":"load"),o.a.createElement("input",{onChange:function(e){return p(e.target.value)},value:j}),o.a.createElement("p",null,o.a.createElement("button",{onClick:function(){k?(E.pause(),U.unsubscribe(),C(!1)):(E.resume(),I(E),C(!0))}},"toggle")),o.a.createElement(w,{data:n}));function I(e){var t=e.subject.pipe(Object(d.a)(y)).subscribe(a);W(t)}},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.2bd83b43.chunk.js.map