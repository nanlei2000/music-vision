(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(30)},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(18),r=n.n(o),u=(n(28),n(7)),i=n(34),s=n(31),l=n(36),f=n(35),b=n(32),d=n(33),m=n(37),p=n(19),v=i.a(new Uint8Array);var h=n(20),j=n.n(h);function w(e){var t=e.data,n=document.createElement("div"),o=Object(c.useState)(!1),r=Object(u.a)(o,2),i=r[0],s=r[1],l=Object(c.useState)(void 0),f=Object(u.a)(l,2),b=f[0],d=f[1];return Object(c.useEffect)(function(){if(!i){console.log("once");var e=new j.a.Chart({container:n,forceFit:!0,height:400,padding:{left:0,right:0,bottom:0,top:0}});e.source(t),e.axis(!1),e.legend(!1),e.tooltip(!1),e.line().position("index*volume").color("#000"),e.render(),d(e),s(!0)}return b&&i&&b.changeData(t),function(){}}),a.a.createElement("div",{id:"chart",ref:function(e){n=e}})}n(29);var g=n(3),O="https://raw.githubusercontent.com/nanlei2000/music-src/master/Levitate.mp3",y={pause:function(){},resume:function(){},close:function(){},subject:v},E=function(e){return e.reduce(function(e,t,n){return e.concat({index:n+1,volume:t})},[])};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(O),i=Object(u.a)(r,2),v=i[0],h=i[1],j=Object(c.useState)(!1),S=Object(u.a)(j,2),k=S[0],C=S[1],x=Object(c.useState)(!1),A=Object(u.a)(x,2),B=A[0],z=A[1],D=Object(c.useState)(!1),q=Object(u.a)(D,2),F=q[0],J=q[1],P=Object(c.useState)(g.a.EMPTY),U=Object(u.a)(P,2),W=U[0],G=U[1],I=function(){return function(e){return fetch(e).then(function(e){return e.arrayBuffer()})}(v).then(function(e){return function(e){var t=e.src,n=e.volume,c=e.size,a=new(window.AudioContext||window.webkitAudioContext),o=a.createGain();o.gain.value=n,o.connect(a.destination);var r=a.createAnalyser();return r.fftSize=2*c,r.connect(o),a.decodeAudioData(t).then(function(e){var t=a.createBufferSource();t.buffer=e,t.loop=!0,t.connect(r),t.start(0);var n=new Uint8Array(r.frequencyBinCount),c=new s.a(n);return{pause:function(){a.suspend()},resume:function(){a.resume()},close:function(){a.close(),c.unsubscribe()},subject:l.a(0,f.a).pipe(Object(b.a)(function(){console.log(1),r.getByteFrequencyData(n)}),Object(d.a)(function(){return n}),Object(m.a)(c),Object(p.a)())}})}({src:e,size:128,volume:.6})}).then(function(e){y=e,L(e)})};return Object(c.useEffect)(function(){B||(J(!0),I().finally(function(){J(!1),C(!0)})),z(!0)},[]),a.a.createElement("div",null,a.a.createElement("button",{style:{marginRight:"10px",backgroundColor:F?"orange":""},onClick:function(){y.close(),J(!0),I().finally(function(){J(!1)})}},F?"loading":"load"),a.a.createElement("input",{style:{width:"70%"},placeholder:"Paste url here,then press load button",onChange:function(e){return h(e.target.value)},value:v}),a.a.createElement("p",null,a.a.createElement("button",{onClick:function(){k?(y.pause(),W.unsubscribe(),C(!1)):(y.resume(),L(y),C(!0))}},"toggle player status")),a.a.createElement(w,{data:n}));function L(e){var t=e.subject.pipe(Object(d.a)(E)).subscribe(o);G(t)}},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.62f51239.chunk.js.map